!function(e,t,n){"use strict";e.fn.backstretch=function(i,o){return(i===n||0===i.length)&&e.error("No images were supplied for Backstretch"),0===e(t).scrollTop()&&t.scrollTo(0,0),this.each(function(){var t=e(this),n=t.data("backstretch");n&&(o=e.extend(n.options,o),n.destroy(!0)),n=new r(this,i,o),t.data("backstretch",n)})},e.backstretch=function(t,n){return e("body").backstretch(t,n).data("backstretch")},e.expr[":"].backstretch=function(t){return e(t).data("backstretch")!==n},e.fn.backstretch.defaults={centeredX:!0,centeredY:!0,duration:5e3,fade:0};var i={wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},img:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxWidth:"none",zIndex:-999999}},r=function(n,r,a){if(this.options=e.extend({},e.fn.backstretch.defaults,a||{}),this.images=e.isArray(r)?r:[r],e.each(this.images,function(){e("<img />")[0].src=this}),this.isBody=n===document.body,this.$container=e(n),this.$wrap=e('<div class="backstretch"></div>').css(i.wrap).appendTo(this.$container),this.$root=this.isBody?e(o?t:document):this.$container,!this.isBody){var s=this.$container.css("position"),c=this.$container.css("zIndex");this.$container.css({position:"static"===s?"relative":s,zIndex:"auto"===c?0:c,background:"none"}),this.$wrap.css({zIndex:-999998})}this.$wrap.css({position:this.isBody&&o?"fixed":"absolute"}),this.index=0,this.show(this.index),e(t).on("resize.backstretch",e.proxy(this.resize,this)).on("orientationchange.backstretch",e.proxy(function(){this.isBody&&0===t.pageYOffset&&(t.scrollTo(0,1),this.resize())},this))};r.prototype={resize:function(){try{var e,n={left:0,top:0},i=this.isBody?this.$root.width():this.$root.innerWidth(),r=i,o=this.isBody?t.innerHeight?t.innerHeight:this.$root.height():this.$root.innerHeight(),a=r/this.$img.data("ratio");a>=o?(e=(a-o)/2,this.options.centeredY&&(n.top="-"+e+"px")):(a=o,r=a*this.$img.data("ratio"),e=(r-i)/2,this.options.centeredX&&(n.left="-"+e+"px")),this.$wrap.css({width:i,height:o}).find("img:not(.deleteable)").css({width:r,height:a}).css(n)}catch(s){}return this},show:function(t){if(!(Math.abs(t)>this.images.length-1)){this.index=t;var n=this,r=n.$wrap.find("img").addClass("deleteable"),o=e.Event("backstretch.show",{relatedTarget:n.$container[0]});return clearInterval(n.interval),n.$img=e("<img />").css(i.img).bind("load",function(t){var i=this.width||e(t.target).width(),a=this.height||e(t.target).height();e(this).data("ratio",i/a),e(this).fadeIn(n.options.speed||n.options.fade,function(){r.remove(),n.paused||n.cycle(),n.$container.trigger(o,n)}),n.resize()}).appendTo(n.$wrap),n.$img.attr("src",n.images[t]),n}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this.next(),this},cycle:function(){return this.images.length>1&&(clearInterval(this.interval),this.interval=setInterval(e.proxy(function(){this.paused||this.next()},this),this.options.duration)),this},destroy:function(n){e(t).off("resize.backstretch orientationchange.backstretch"),clearInterval(this.interval),n||this.$wrap.remove(),this.$container.removeData("backstretch")}};var o=function(){var e=navigator.userAgent,n=navigator.platform,i=e.match(/AppleWebKit\/([0-9]+)/),r=!!i&&i[1],o=e.match(/Fennec\/([0-9]+)/),a=!!o&&o[1],s=e.match(/Opera Mobi\/([0-9]+)/),c=!!s&&s[1],l=e.match(/MSIE ([0-9]+)/),u=!!l&&l[1];return!((n.indexOf("iPhone")>-1||n.indexOf("iPad")>-1||n.indexOf("iPod")>-1)&&r&&534>r||t.operamini&&"[object OperaMini]"==={}.toString.call(t.operamini)||s&&7458>c||e.indexOf("Android")>-1&&r&&533>r||a&&6>a||"palmGetResource"in t&&r&&534>r||e.indexOf("MeeGo")>-1&&e.indexOf("NokiaBrowser/8.5.0")>-1||u&&6>=u)}()}(jQuery,window);
